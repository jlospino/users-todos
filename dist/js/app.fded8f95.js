(function(){"use strict";var t={270:function(t,e,n){n.d(e,{Z:function(){return c}});var r=function(){var t=this,e=t._self._c;return e("header",{staticClass:"navbar"},[e("div",{staticClass:"navbar_contain"},[e("button",{staticClass:"navbar_item",on:{click:function(e){return t.toggleNav()}}},[e("svg",{attrs:{width:"16",height:"13",viewBox:"0 0 16 13",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[e("path",{attrs:{d:"M0 6.5H15",stroke:"#A0A5BA","stroke-width":"1.4","stroke-linecap":"round","stroke-linejoin":"round"}}),e("path",{attrs:{d:"M0 1.5H15",stroke:"#A0A5BA","stroke-width":"1.4","stroke-linecap":"round","stroke-linejoin":"round"}}),e("path",{attrs:{d:"M7 11.5H15",stroke:"#A0A5BA","stroke-width":"1.4","stroke-linecap":"round","stroke-linejoin":"round"}})]),e("span",{staticClass:"navbar_item__text"},[t._v(t._s(t.breadcum))])]),e("button",{staticClass:"navbar_item rigth d-flex dropdown"},[e("img",{staticClass:"navbar_item__avatar",attrs:{src:t.user.photo}}),e("span",{staticClass:"navbar_item__text"},[t._v(t._s(`${t.user.firstName} ${t.user.lastName}`))]),e("div",{staticClass:"dropdown-content"},[e("a",{attrs:{href:"#"},on:{click:t.logout}},[t._v("Cerrar SesiÃ³n")])])])])])},o=[],s=n(3822),a={name:"HeaderMenu",props:{breadcum:String},computed:{...(0,s.rn)("account",["status"]),user(){return this.$store.state.account.user}},methods:{...(0,s.nv)("account",["logout"]),toggleNav(){this.$parent.$emit("toggleNav")}}},i=a,u=n(1001),l=(0,u.Z)(i,r,o,!1,null,null,null),c=l.exports},2713:function(t,e,n){n.d(e,{Z:function(){return l}});var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"sidebar",class:{active:t.active}},[e("router-link",{attrs:{to:"/"}},[e("span",{staticClass:"text_title"},[t._v(" System ")])]),e("router-link",{attrs:{to:"/"}},[e("svg",{attrs:{width:"16",height:"17",viewBox:"0 0 16 17",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[e("path",{attrs:{d:"M10.2 12.4L7.5 10.4C8.4 9.69999 9 8.69999 9 7.49999V6.69999C9 4.79999 7.6 3.09999 5.7 2.99999C3.7 2.89999 2 4.49999 2 6.49999V7.49999C2 8.69999 2.6 9.69999 3.5 10.4L0.8 12.5C0.3 12.9 0 13.5 0 14.1V16C0 16.6 0.4 17 1 17H10C10.6 17 11 16.6 11 16V14C11 13.4 10.7 12.8 10.2 12.4Z",fill:"#3B5CE7"}}),e("path",{attrs:{d:"M15.1 7.4L13.3 6.2C13.7 5.8 14 5.2 14 4.5V3.6C14 2.4 13.1 1.2 11.9 0.999999C10.7 0.799999 9.70001 1.5 9.20001 2.4C10.3 3.4 11 4.8 11 6.4V7.4C11 8.3 10.8 9.2 10.4 9.9C10.4 9.9 11.6 10.8 11.6 10.9H15C15.6 10.9 16 10.5 16 9.9V9.1C16 8.4 15.7 7.8 15.1 7.4Z",fill:"#3B5CE7"}})]),e("span",{staticClass:"text"},[t._v(" Users ")])])],1)},o=[],s={name:"SidebarMenu",data(){return{active:!0,marginLeft:"20%"}},mounted(){this.$parent.$on("toggleNav",(()=>{this.active=!this.active,this.marginLeft=this.active?"20%":"0px"}))}},a=s,i=n(1001),u=(0,i.Z)(a,r,o,!1,null,null,null),l=u.exports},2244:function(t,e,n){var r=n(6369),o=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[t.alert.message?e("div",{class:`alert ${t.alert.type}`},[e("span",{staticClass:"material-symbols-outlined icon"},[t._v(" error ")]),e("div",[e("b",[t._v("Error")]),e("br"),t._v(" "+t._s(t.alert.message)+" ")])]):t._e(),e("router-view")],1)},s=[],a=n(3822),i={name:"App",computed:{...(0,a.rn)({alert:t=>t.alert})},methods:{...(0,a.nv)({clearAlert:"alert/clear"})},watch:{$route(){this.clearAlert()}}},u=i,l=n(1001),c=(0,l.Z)(u,o,s,!1,null,null,null),d=c.exports,p=(n(6699),n(2631)),m=function(){var t=this,e=t._self._c;return e("div",{staticClass:"login"},[e("div",{staticClass:"login_card"},[e("h3",{staticClass:"login_card__header"},[t._v("Login to your account")]),e("form",{on:{submit:function(e){return e.preventDefault(),t.handleSubmit.apply(null,arguments)}}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"input_text",attrs:{type:"text",placeholder:"Username"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"input_text",attrs:{type:"password",placeholder:"Password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),t._m(0)])])])},f=[function(){var t=this,e=t._self._c;return e("button",{staticClass:"login_button",attrs:{type:"submit"}},[e("span",{staticClass:"text"},[t._v("Log In")]),e("span",{staticClass:"material-symbols-outlined icon"},[t._v("arrow_forward")])])}],g={name:"LoginPage",data(){return{username:"",password:"",submitted:!1}},computed:{...(0,a.rn)("account",["status"])},created(){},methods:{...(0,a.nv)("account",["login","logout"]),handleSubmit(t){t.preventDefault(),this.submitted=!0;const{username:e,password:n}=this;e&&n&&this.login({username:e,password:n})}}},h=g,v=(0,l.Z)(h,m,f,!1,null,null,null),b=v.exports;r.ZP.use(p.Z);const w=[{path:"/login",name:"Login",component:b},{path:"/users",name:"Dashboard",component:()=>Promise.all([n.e(265),n.e(445)]).then(n.bind(n,5445))},{path:"/users/:id/todos",name:"users",component:()=>Promise.all([n.e(265),n.e(227)]).then(n.bind(n,3227))},{path:"*",redirect:"/users"}],_=new p.Z({mode:"history",base:"/",routes:w});_.beforeEach(((t,e,n)=>{const r=["/login"],o=!r.includes(t.path),s=localStorage.getItem("user");return console.log(s),o&&!s?n("/login"):!o&&s?n("/users"):void n()}));var C=_;const y="http://localhost:8081";var k={apiUrl:y};function S(){let t=JSON.parse(localStorage.getItem("user"));return t&&t.token?{Authorization:"Bearer "+t.token}:{}}const x={login:N,logout:O,getById:P};function N(t,e){const n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,password:e})};return fetch(`${k.apiUrl}/users/authenticate`,n).then(j).then((t=>(t.token&&(console.log(t),localStorage.setItem("user",JSON.stringify(t))),t)))}function O(){localStorage.removeItem("user")}function P(t){const e={method:"GET",headers:S()};return fetch(`${k.apiUrl}/users/${t}`,e).then(j)}function j(t){return t.text().then((e=>{const n=e&&JSON.parse(e);if(!t.ok){401===t.status&&(O(),location.reload(!0));const e=n&&n.message||t.statusText;return Promise.reject(e)}return n}))}const Z=JSON.parse(localStorage.getItem("user")),A=Z?{status:{loggedIn:!0},user:Z}:{status:{},user:null},T={login({dispatch:t,commit:e},{username:n,password:r}){e("loginRequest",{username:n}),x.login(n,r).then((t=>{e("loginSuccess",t),C.push({path:"/users"})}),(n=>{console.log("Error Login: ",n),e("loginFailure",n),t("alert/error",n,{root:!0})}))},logout({commit:t}){x.logout(),t("logout"),C.push({path:"/login"})}},I={loginRequest(t,e){t.status={loggingIn:!0},t.user=e},loginSuccess(t,e){t.status={loggedIn:!0},t.user=e},loginFailure(t){t.status={},t.user=null},logout(t){t.status={},t.user=null}},$={namespaced:!0,state:A,actions:T,mutations:I},E={type:null,message:null},L={success({commit:t},e){t("success",e)},error({commit:t},e){t("error",e)},clear({commit:t}){t("clear")}},M={success(t,e){t.type="alert_success",t.message=e},error(t,e){t.type="alert_danger",t.message=e},clear(t){t.type=null,t.message=null}},B={namespaced:!0,state:E,actions:L,mutations:M};r.ZP.use(a.ZP);var J=new a.ZP.Store({modules:{account:$,alert:B}});r.ZP.component("SidebarMenu",n(2713).Z),r.ZP.component("HeaderMenu",n(270).Z);const H=[{id:12345,username:"jlospino",password:"12345",firstName:"Jose Luis",lastName:"Ospino Cueva",photo:"https://avataaars.io/?avatarStyle=Circle"}];localStorage.getItem("users")||localStorage.setItem("users",JSON.stringify(H));let U=JSON.parse(localStorage.getItem("users"));function V(){let t=window.fetch;window.fetch=function(e,n){return new Promise(((r,o)=>{setTimeout((()=>{if(e.endsWith("/users/authenticate")&&"POST"===n.method){let t=JSON.parse(n.body),e=U.filter((e=>e.username===t.username&&e.password===t.password));if(console.log(n),e.length){let t=e[0],n={id:t.id,username:t.username,firstName:t.firstName,lastName:t.lastName,token:"fake-jwt-token",photo:t.photo};r({ok:!0,text:()=>Promise.resolve(JSON.stringify(n))})}else o("Username or password is incorrect")}else if(e.match(/\/users\/\d+$/)&&"GET"===n.method)if(n.headers&&"Bearer fake-jwt-token"===n.headers.Authorization){let t=e.split("/"),n=parseInt(t[t.length-1]),o=U.filter((t=>t.id===n)),s=o.length?o[0]:null;r({ok:!0,text:()=>JSON.stringify(s)})}else o("Unauthorised");else t(e,n).then((t=>r(t)))}),500)}))}}V(),r.ZP.config.productionTip=!0,new r.ZP({router:C,store:J,render:t=>t(d)}).$mount("#app")}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var s=e[r]={exports:{}};return t[r](s,s.exports,n),s.exports}n.m=t,function(){var t=[];n.O=function(e,r,o,s){if(!r){var a=1/0;for(c=0;c<t.length;c++){r=t[c][0],o=t[c][1],s=t[c][2];for(var i=!0,u=0;u<r.length;u++)(!1&s||a>=s)&&Object.keys(n.O).every((function(t){return n.O[t](r[u])}))?r.splice(u--,1):(i=!1,s<a&&(a=s));if(i){t.splice(c--,1);var l=o();void 0!==l&&(e=l)}}return e}s=s||0;for(var c=t.length;c>0&&t[c-1][2]>s;c--)t[c]=t[c-1];t[c]=[r,o,s]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}}(),function(){n.f={},n.e=function(t){return Promise.all(Object.keys(n.f).reduce((function(e,r){return n.f[r](t,e),e}),[]))}}(),function(){n.u=function(t){return"js/"+t+"."+{227:"f6182d03",265:"02eef895",445:"56ed5ded"}[t]+".js"}}(),function(){n.miniCssF=function(t){}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={},e="frontend:";n.l=function(r,o,s,a){if(t[r])t[r].push(o);else{var i,u;if(void 0!==s)for(var l=document.getElementsByTagName("script"),c=0;c<l.length;c++){var d=l[c];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==e+s){i=d;break}}i||(u=!0,i=document.createElement("script"),i.charset="utf-8",i.timeout=120,n.nc&&i.setAttribute("nonce",n.nc),i.setAttribute("data-webpack",e+s),i.src=r),t[r]=[o];var p=function(e,n){i.onerror=i.onload=null,clearTimeout(m);var o=t[r];if(delete t[r],i.parentNode&&i.parentNode.removeChild(i),o&&o.forEach((function(t){return t(n)})),e)return e(n)},m=setTimeout(p.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=p.bind(null,i.onerror),i.onload=p.bind(null,i.onload),u&&document.head.appendChild(i)}}}(),function(){n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){n.p="/"}(),function(){var t={143:0};n.f.j=function(e,r){var o=n.o(t,e)?t[e]:void 0;if(0!==o)if(o)r.push(o[2]);else{var s=new Promise((function(n,r){o=t[e]=[n,r]}));r.push(o[2]=s);var a=n.p+n.u(e),i=new Error,u=function(r){if(n.o(t,e)&&(o=t[e],0!==o&&(t[e]=void 0),o)){var s=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;i.message="Loading chunk "+e+" failed.\n("+s+": "+a+")",i.name="ChunkLoadError",i.type=s,i.request=a,o[1](i)}};n.l(a,u,"chunk-"+e,e)}},n.O.j=function(e){return 0===t[e]};var e=function(e,r){var o,s,a=r[0],i=r[1],u=r[2],l=0;if(a.some((function(e){return 0!==t[e]}))){for(o in i)n.o(i,o)&&(n.m[o]=i[o]);if(u)var c=u(n)}for(e&&e(r);l<a.length;l++)s=a[l],n.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return n.O(c)},r=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}();var r=n.O(void 0,[998],(function(){return n(2244)}));r=n.O(r)})();
//# sourceMappingURL=app.fded8f95.js.map