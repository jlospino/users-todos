{"ast":null,"code":"import axios from 'axios';\nexport default {\n  name: \"TableUsersToDos\",\n  props: {\n    userId: String\n  },\n\n  created() {\n    this.getUserToDos();\n  },\n\n  data() {\n    return {\n      filter: 'all',\n      todos_filter: [],\n      todos: [],\n      todo: ''\n    };\n  },\n\n  methods: {\n    getUserToDos() {\n      if (localStorage.getItem(`todos_${this.userId}`)) {\n        this.todos = JSON.parse(localStorage.getItem(`todos_${this.userId}`));\n        this.todos_filter = this.todos;\n      } else {\n        axios.get(`https://jsonplaceholder.typicode.com/todos?userId=${this.userId}`).then(res => {\n          localStorage.setItem(`todos_${this.userId}`, JSON.stringify(res.data));\n          this.todos = res.data;\n          this.todos_filter = res.data;\n        });\n      }\n    },\n\n    filterToDos(state) {\n      this.filter = state;\n\n      if (state === 'all') {\n        this.todos_filter = this.todos;\n      } else {\n        this.todos_filter = this.todos.filter(function (todo) {\n          return state === 'pending' ? todo.completed == false : todo.completed == true;\n        });\n      }\n    },\n\n    addToDo() {\n      if (this.todo === '') return;\n      const newTodo = {\n        completed: false,\n        title: this.todo,\n        id: this.todos[this.todos.length - 1].id + 1,\n        //Take a last and add one\n        userId: this.userId\n      };\n      const newsTodos = [...JSON.parse(localStorage.getItem(`todos_${this.userId}`)), newTodo];\n      localStorage.setItem(`todos_${this.userId}`, JSON.stringify(newsTodos));\n      this.todo = '';\n      this.getUserToDos();\n    },\n\n    removeToDo(id) {\n      // Add others todo's with a different id\n      const todosFilter = this.todos.filter(item => {\n        return item.id !== id;\n      });\n      localStorage.setItem(`todos_${this.userId}`, JSON.stringify(todosFilter));\n      this.getUserToDos();\n    },\n\n    completeToDo(todo) {\n      const todosComplete = this.todos.map(item => {\n        if (item.id == todo.id) {\n          console.log({ ...item,\n            completed: !item.completed\n          });\n          return { ...todo,\n            completed: !item.completed\n          };\n        } else {\n          return item;\n        }\n      });\n      console.log(todosComplete); //localStorage.setItem(`todos_${this.userId}`, JSON.stringify(todosComplete));\n    }\n\n  }\n};","map":{"version":3,"mappings":"AAiEA;AACA;EACAA,uBADA;EAEAC;IACAC;EADA,CAFA;;EAKAC;IACA;EACA,CAPA;;EAQAC;IACA;MACAC,aADA;MAEAC,gBAFA;MAGAC,SAHA;MAIAC;IAJA;EAMA,CAfA;;EAgBAC;IACAC;MACA;QACA;QACA;MACA,CAHA,MAGA;QACAC,8EACAC,IADA,CACAC;UACAC;UACA;UACA;QACA,CALA;MAMA;IACA,CAbA;;IAcAC;MACA;;MACA;QACA;MACA,CAFA,MAEA;QACA;UACA;QACA,CAFA;MAGA;IACA,CAvBA;;IAwBAC;MACA;MACA;QACAC,gBADA;QAEAC,gBAFA;QAGAC,4CAHA;QAGA;QACAjB;MAJA;MAMA;MACAY;MACA;MACA;IACA,CApCA;;IAqCAM;MACA;MACA;QACA;MACA,CAFA;MAGAN;MACA;IACA,CA5CA;;IA6CAO;MACA;QACA;UACAC;YAAAL;UAAA;UACA;YAAAA;UAAA;QACA,CAHA,MAGA;UACA;QACA;MACA,CAPA;MAQAK,2BATA,CAUA;IACA;;EAxDA;AAhBA","names":["name","props","userId","created","data","filter","todos_filter","todos","todo","methods","getUserToDos","axios","then","res","localStorage","filterToDos","addToDo","completed","title","id","removeToDo","completeToDo","console"],"sourceRoot":"src/components/users","sources":["TableUserToDos.vue"],"sourcesContent":["<template>\r\n    <div class=\"todos-list\">\r\n        <div class=\"task-input\">\r\n            <span class=\"material-symbols-outlined task-input-icon\">\r\n                splitscreen\r\n            </span>\r\n            <input \r\n                type=\"text\" \r\n                v-model=\"todo\" \r\n                placeholder=\"Add a new task\"\r\n                v-on:keyup.enter=\"addToDo()\"\r\n            >\r\n            <button \r\n                class=\"button_add\"\r\n                @click=\"addToDo()\"\r\n            >\r\n                Add To Do\r\n            </button>\r\n        </div>\r\n        <div class=\"controls\">\r\n            <div class=\"filters\">\r\n                <span \r\n                    :class=\"{'active': filter == 'all'}\"\r\n                    @click=\"filterToDos('all')\"\r\n                >\r\n                    All\r\n                </span>\r\n                <span \r\n                    :class=\"{'active': filter == 'pending'}\"\r\n                    @click=\"filterToDos('pending')\"\r\n                >\r\n                    Pending\r\n                </span>\r\n                <span \r\n                    :class=\"{'active': filter == 'completed'}\"\r\n                    @click=\"filterToDos('completed')\"\r\n                >\r\n                    Completed\r\n                </span>\r\n            </div> \r\n            <span class=\"rigth\">{{ todos_filter.length }} Results</span>\r\n        </div>\r\n        <ul class=\"task-box\">\r\n            <li class=\"task\" v-for=\"(todo, index) in todos_filter\" :key=\"index\">\r\n                <label :for=\"`${todo.id}`\">\r\n                    <input \r\n                        type=\"checkbox\" \r\n                        :id=\"`${todo.id}`\" \r\n                        :checked=\"todo.completed\"\r\n                        @change=\"completeToDo(todo)\"\r\n                    />\r\n                    <p :class=\"`${todo.completed ? 'active_task' : ''}`\">{{ todo.title }}</p>\r\n                </label>\r\n                <button \r\n                    class=\"button_small\"\r\n                    @click=\"removeToDo(todo.id)\"\r\n                >\r\n                    Eliminar\r\n                </button>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\nexport default {\r\n    name: \"TableUsersToDos\",\r\n    props:{\r\n        userId: String\r\n    },\r\n    created(){\r\n        this.getUserToDos();\r\n    },\r\n    data() {\r\n        return {\r\n            filter: 'all',\r\n            todos_filter: [],\r\n            todos: [],\r\n            todo: ''\r\n        }\r\n    },\r\n    methods:{\r\n        getUserToDos() {\r\n            if(localStorage.getItem(`todos_${this.userId}`)){\r\n                this.todos = JSON.parse(localStorage.getItem(`todos_${this.userId}`));\r\n                this.todos_filter = this.todos;\r\n            }else{\r\n                axios.get(`https://jsonplaceholder.typicode.com/todos?userId=${this.userId}`)\r\n                .then((res) => {\r\n                    localStorage.setItem(`todos_${this.userId}`, JSON.stringify(res.data));\r\n                    this.todos = res.data;\r\n                    this.todos_filter = res.data;\r\n                });\r\n            }            \r\n        },\r\n        filterToDos(state){\r\n            this.filter = state;\r\n            if(state === 'all'){\r\n                this.todos_filter = this.todos;\r\n            }else{\r\n                this.todos_filter = this.todos.filter( function(todo) {\r\n                    return state === 'pending' ? todo.completed == false : todo.completed == true;\r\n                });\r\n            }\r\n        },\r\n        addToDo(){\r\n            if ( this.todo === '' ) return;\r\n            const newTodo = {\r\n                completed: false,\r\n                title: this.todo,\r\n                id: this.todos[this.todos.length - 1].id + 1, //Take a last and add one\r\n                userId: this.userId\r\n            }\r\n            const newsTodos = [...JSON.parse(localStorage.getItem(`todos_${this.userId}`)), newTodo];\r\n            localStorage.setItem(`todos_${this.userId}`, JSON.stringify(newsTodos));\r\n            this.todo = '';\r\n            this.getUserToDos();\r\n        },\r\n        removeToDo(id){\r\n            // Add others todo's with a different id\r\n            const todosFilter = this.todos.filter(item => {\r\n                return item.id !== id;\r\n            });\r\n            localStorage.setItem(`todos_${this.userId}`, JSON.stringify(todosFilter));\r\n            this.getUserToDos();\r\n        },\r\n        completeToDo(todo){\r\n            const todosComplete = this.todos.map(item => {\r\n                if(item.id == todo.id){\r\n                    console.log({...item, completed: !item.completed});\r\n                    return {...todo, completed: !item.completed};\r\n                }else{\r\n                    return item;\r\n                }\r\n            });\r\n            console.log(todosComplete)\r\n            //localStorage.setItem(`todos_${this.userId}`, JSON.stringify(todosComplete));\r\n        }\r\n    }\r\n}\r\n</script>\r\n"]},"metadata":{},"sourceType":"module"}